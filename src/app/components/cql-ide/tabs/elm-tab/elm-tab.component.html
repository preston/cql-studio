<div class="elm-panel">
  <div class="p-3 text-light">
    <!-- ELM Translation Header -->
    <div class="d-flex justify-content-between align-items-center mb-3 pb-2 border-bottom">
      <div class="d-flex align-items-center gap-2">
        <span class="fw-semibold small text-white">ELM Translation</span>
      </div>
      <div class="d-flex gap-2">
        <button 
          class="btn btn-primary btn-sm" 
          (click)="onTranslateCqlToElm()" 
          [disabled]="!cqlContent || isTranslating"
          title="Translate CQL to ELM"
        >
          {{ isTranslating ? 'Translating...' : 'Translate' }}
        </button>
        <button 
          class="btn btn-outline-light btn-sm" 
          (click)="onClearElmTranslation()" 
          [disabled]="!elmTranslationResults"
          title="Clear Translation"
        >
          <i class="bi bi-x"></i>
        </button>
      </div>
    </div>

    <!-- Auto-translate checkbox -->
    <div class="form-check mb-3">
      <input 
        class="form-check-input" 
        type="checkbox" 
        id="enableElmTranslation" 
        [(ngModel)]="settingsService.settings().enableElmTranslation"
      >
      <label class="form-check-label small text-light" for="enableElmTranslation">
        Auto-translate
      </label>
    </div>
    
    <!-- ELM Translation Results -->
    @if (isTranslating || elmTranslationResults) {
      <div class="border rounded p-2" style="overflow-y: auto;">
        @if (isTranslating) {
          <div class="d-flex align-items-center justify-content-center py-4 text-muted">
            <i class="bi bi-arrow-clockwise me-2"></i>
            <span>Translating CQL to ELM...</span>
          </div>
        }
        
        @if (!isTranslating && elmTranslationResults) {
          <app-syntax-highlighter [code]="elmTranslationResultsAsString()" [language]="'xml'"></app-syntax-highlighter>
        }
      </div>
    }
  </div>
</div>
