<div class="cql-editor-container">
  <!-- Editor Toolbar -->
  <div class="editor-toolbar border-bottom d-flex align-items-center justify-content-between px-3 py-2">
    <div class="d-flex align-items-center gap-2">
      <button 
        class="btn btn-success btn-sm" 
        (click)="onExecuteLibrary()" 
        [disabled]="!canExecute() || isExecuting" 
        title="Execute Library"
      >
        @if (!isExecuting) {
          <i class="bi bi-play me-1"></i>
        }
        @if (isExecuting) {
          <i class="bi bi-arrow-clockwise me-1"></i>
        }
        Execute
      </button>
      <button 
        class="btn btn-secondary btn-sm" 
        (click)="onReloadLibrary()" 
        title="Reload from Server"
      >
        <i class="bi bi-arrow-clockwise me-1"></i>
        Reload
      </button>
      <div class="d-flex align-items-center gap-1">
        <label class="form-label mb-0 small text-light">CQL:</label>
        <select 
          class="form-select form-select-sm" 
          [value]="cqlVersion" 
          (change)="onCqlVersionChange($event)"
          title="CQL Version"
          style="min-width: 120px;"
        >
          <option value="1.5.3">1.5.3</option>
          <option value="2.0.0-ballot">2.0.0-ballot</option>
        </select>
      </div>
    </div>
    <div class="d-flex align-items-center gap-2">
      <button 
        class="btn btn-link btn-sm" 
        (click)="onFormatCql()" 
        title="Format CQL"
      >
        <i class="bi bi-code-slash"></i>
      </button>
      <button 
        class="btn btn-link btn-sm" 
        (click)="onValidateCql()" 
        title="Validate CQL"
      >
        <i class="bi bi-check"></i>
      </button>
      <button 
        class="btn btn-primary btn-sm" 
        (click)="onSaveLibrary()" 
        [disabled]="!isFormValid()" 
        title="Save Library"
      >
        <i class="bi bi-upload me-1"></i>
        Save
      </button>
    </div>
  </div>
  
  <!-- Editor Container -->
  <div #editorContainer class="cql-editor"></div>
</div>
